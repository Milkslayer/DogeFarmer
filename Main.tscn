[gd_scene load_steps=5 format=2]

[ext_resource path="res://Main.gd" type="Script" id=1]
[ext_resource path="res://src/dogeclicker/DogeClicker.tscn" type="PackedScene" id=2]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;

const float PI = 3.14159265359;
const vec4 data[] = {
	vec4(22., 10., 0.2, 0.6)
};

vec2 centerRadToPoints(vec2 inp){
	return vec2(inp.x - inp.y/2., inp.x + inp.y/2.);
}

float f(vec2 rs, vec2 x, vec2 y){
	return step(rs.x, x.x) + step(x.y, rs.x) 
	+ step(rs.y, y.x) + step(y.y, rs.y);
}

vec2 minXMaxY(vec2 inp){
	return vec2(min(inp.x, inp.y), max(inp.x, inp.y));
}


vec3 candle(vec2 rs, vec2 x, vec2 openClose, vec2 minMax, vec3 color){
	float d = step(1., f(rs, centerRadToPoints(vec2(x.x, 0.002)), minMax));
	float a = step(1., f(rs, centerRadToPoints(x), minXMaxY(openClose)));
	d = step(a, d);
	vec3 t = (1.-d) * vec3(0.1, 0.2, 0.3);
	return t + (1.-a) * color;
}

void fragment(){
	vec2 rs = UV.xy;
	rs.y = rs.y * -1. + 1.;
	
	vec3 d = vec3(0.);
	d += candle(rs, vec2(0.05, .015), vec2(0.22,0.1), vec2(0.09, 0.4), vec3(1., 0., 0.));
	d += candle(rs, vec2(0.1, .015), vec2(0.1,0.4), vec2(0.04, 0.6), vec3(0., 1., 0.));
	d += candle(rs, vec2(0.15, .015), vec2(0.4,0.2), vec2(0.1, 0.5), vec3(1., 0., 0.));
	
	COLOR = vec4(step(vec3(0.1), d), 1.);
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )

[node name="Main" type="Node2D"]
script = ExtResource( 1 )

[node name="DogeClicker" parent="." instance=ExtResource( 2 )]
position = Vector2( 391, 248 )

[node name="CoinLabel" type="Label" parent="."]
text = "Dogecoins"
structured_text_bidi_override_options = [  ]
script = null
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ColorRect" type="ColorRect" parent="."]
material = SubResource( 2 )
offset_left = 106.014
offset_top = 0.863419
offset_right = 900.014
offset_bottom = 370.863
script = null
__meta__ = {
"_edit_use_anchors_": false
}
